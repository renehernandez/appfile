{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"What is Appfile? \u00b6 appfile is a CLI plus a specification, to manage deployments of customizable App Specs to DigitalOcean App Platform. It supports reading an appfile.yaml with multiple declared app specifications to manage. Alternative, it falls back to process a single app spec . Features \u00b6 Keep a directory of app spec values files and maintain changes in version control. This allows you to support multiple environments with different components and configurations per app.yaml file. Apply CI/CD to configuration changes. Using appfile directly or the appfile action , you can automate the deployments of different environments based on the branch you are running. For example, review environments with lower requirements in terms of CPU and memory vs production environment. Visualize a diff of the changes to be applied. It lets you print a diff in console, which helps you verify that the correct changes are going to be deployed into App Platform Show status of apps Using appfile , you can see the status of your declared Apps, which includes essential information such as: last update, deployment ID, live URL, among others.","title":"Home"},{"location":"#what-is-appfile","text":"appfile is a CLI plus a specification, to manage deployments of customizable App Specs to DigitalOcean App Platform. It supports reading an appfile.yaml with multiple declared app specifications to manage. Alternative, it falls back to process a single app spec .","title":"What is Appfile?"},{"location":"#features","text":"Keep a directory of app spec values files and maintain changes in version control. This allows you to support multiple environments with different components and configurations per app.yaml file. Apply CI/CD to configuration changes. Using appfile directly or the appfile action , you can automate the deployments of different environments based on the branch you are running. For example, review environments with lower requirements in terms of CPU and memory vs production environment. Visualize a diff of the changes to be applied. It lets you print a diff in console, which helps you verify that the correct changes are going to be deployed into App Platform Show status of apps Using appfile , you can see the status of your declared Apps, which includes essential information such as: last update, deployment ID, live URL, among others.","title":"Features"},{"location":"CHANGELOG/","text":"Changelog \u00b6 v0.0.7 (2020-12-14) \u00b6 Fixed bugs: Fix redirect URL #34 Keep files when pushing redirection update #33 Documentation: Redirect to latest documentation #26 v0.0.6 (2020-12-14) \u00b6 Implemented enhancements: Replace list command with status command #29 Read directly app.yaml #24 Replace list command with status #30 Support processing app specification directly #28 Documentation: Add redirect generation #32 General status command docs and examples for reading app.yaml directly #31 v0.0.5 (2020-12-12) \u00b6 Implemented enhancements: Add list command #17 Add list command #20 Fixed bugs: Add publish dir and fix deployments for main branch #23 Documentation: Docs refactoring #25 Add Github Pages automatic deployment and commands help pages #22 Closed issues: Publish documentation #4 v0.0.4 (2020-12-02) \u00b6 Implemented enhancements: Add homebrew automated formulae update #14 Documentation: Update installation section in Readme #15 Closed issues: Add homebrew formulae #1 v0.0.3 (2020-11-27) \u00b6 Implemented enhancements: Print hostname when app is deployed #10 Default values for scope, instance_size_slug, instance_count and kind fields #13 Print hostname per app after sync operation #11 Fixed bugs: Fix hostname successfully deleted message being shown when domain wasn\u2019t found #12 v0.0.2 (2020-11-23) \u00b6 Implemented enhancements: Delete CNAME record during destroy operation #8 Documentation: Docs improvements: action-appfile, writing appfile and cli ref #9 Closed issues: Delete CNAME on app file destroy #7 Add Github Action for appfile #3 v0.0.1 (2020-11-22) \u00b6 Closed issues: Configure CI for release #5 Merged pull requests: Add build artifacts as part of CI #6 * This Changelog was automatically generated by github_changelog_generator","title":"Changelog"},{"location":"CHANGELOG/#changelog","text":"","title":"Changelog"},{"location":"CHANGELOG/#v007-2020-12-14","text":"Fixed bugs: Fix redirect URL #34 Keep files when pushing redirection update #33 Documentation: Redirect to latest documentation #26","title":"v0.0.7 (2020-12-14)"},{"location":"CHANGELOG/#v006-2020-12-14","text":"Implemented enhancements: Replace list command with status command #29 Read directly app.yaml #24 Replace list command with status #30 Support processing app specification directly #28 Documentation: Add redirect generation #32 General status command docs and examples for reading app.yaml directly #31","title":"v0.0.6 (2020-12-14)"},{"location":"CHANGELOG/#v005-2020-12-12","text":"Implemented enhancements: Add list command #17 Add list command #20 Fixed bugs: Add publish dir and fix deployments for main branch #23 Documentation: Docs refactoring #25 Add Github Pages automatic deployment and commands help pages #22 Closed issues: Publish documentation #4","title":"v0.0.5 (2020-12-12)"},{"location":"CHANGELOG/#v004-2020-12-02","text":"Implemented enhancements: Add homebrew automated formulae update #14 Documentation: Update installation section in Readme #15 Closed issues: Add homebrew formulae #1","title":"v0.0.4 (2020-12-02)"},{"location":"CHANGELOG/#v003-2020-11-27","text":"Implemented enhancements: Print hostname when app is deployed #10 Default values for scope, instance_size_slug, instance_count and kind fields #13 Print hostname per app after sync operation #11 Fixed bugs: Fix hostname successfully deleted message being shown when domain wasn\u2019t found #12","title":"v0.0.3 (2020-11-27)"},{"location":"CHANGELOG/#v002-2020-11-23","text":"Implemented enhancements: Delete CNAME record during destroy operation #8 Documentation: Docs improvements: action-appfile, writing appfile and cli ref #9 Closed issues: Delete CNAME on app file destroy #7 Add Github Action for appfile #3","title":"v0.0.2 (2020-11-23)"},{"location":"CHANGELOG/#v001-2020-11-22","text":"Closed issues: Configure CI for release #5 Merged pull requests: Add build artifacts as part of CI #6 * This Changelog was automatically generated by github_changelog_generator","title":"v0.0.1 (2020-11-22)"},{"location":"CONTRIBUTING/","text":"Contributing to Appfile \u00b6 Please take a moment to review this document in order to make the contribution process easy and effective for everyone involved! Using the issue tracker \u00b6 You can use the issues tracker for: Contributing to Appfile Using the issue tracker Bug reports Feature requests Pull requests Use Stackoverflow for questions and personal support requests. Bug reports \u00b6 A bug is a demonstrable problem that is caused by the code in the repository. Good bug reports are extremely helpful - thank you! Guidelines for bug reports: Use the GitHub issue search \u2014 check if the issue has already been reported. Check if the issue has been fixed \u2014 try to reproduce it using the main branch in the repository. Isolate and report the problem \u2014 ideally create a reduced test case. Please try to be as detailed as possible in your report. Include information about your Appfile binary. Please provide steps to reproduce the issue as well as the outcome you were expecting! All these details will help developers to fix any potential bugs. Example: Short and descriptive example bug report title A summary of the issue and the environment in which it occurs. If suitable, include the steps required to reproduce the bug. This is the first step This is the second step Further steps, etc. Any other information you want to share that is relevant to the issue being reported. This might include the lines of code that you have identified as causing the bug, and potential solutions (and your opinions on their merits). Feature requests \u00b6 Feature requests are welcome. But take a moment to find out whether your idea fits with the scope and aims of the project. It\u2019s up to you to make a strong case to convince the community of the merits of this feature. Please provide as much detail and context as possible. Pull requests \u00b6 Good pull requests - patches, improvements, new features - are a fantastic help. They should remain focused in scope and avoid containing unrelated commits. IMPORTANT : By submitting a patch, you agree that your work will be licensed under the license used by the project. If you have any large pull request in mind (e.g. implementing features, refactoring code, etc), please ask first otherwise you risk spending a lot of time working on something that the project\u2019s developers might not want to merge into the project. Please adhere to the coding conventions in the project (indentation, accurate comments, etc.) and don\u2019t forget to add your own tests and documentation. When working with git, we recommend the following process in order to craft an excellent pull request: Fork the project, clone your fork, and configure the remotes: sh # Clone your fork of the repo into the current directory git clone https://github.com/<your-username>/appfile # Navigate to the newly cloned directory cd appfile # Assign the original repo to a remote called \"upstream\" git remote add upstream https://github.com/renehernandez/appfile If you cloned a while ago, get the latest changes from upstream: bash git checkout main git pull upstream main Create a new topic branch (off of main ) to contain your feature, change, or fix. IMPORTANT : Making changes in main is discouraged. You should always keep your local main in sync with upstream main and make your changes in topic branches. sh git checkout -b <topic-branch-name> Commit your changes in logical chunks. Keep your commit messages organized, with a short description in the first line and more detailed information on the following lines. Feel free to use Git\u2019s interactive rebase feature to tidy up your commits before making them public. Make sure all the tests are still passing. sh rake Push your topic branch up to your fork: sh git push origin <topic-branch-name> Open a Pull Request with a clear title and description. If you haven\u2019t updated your pull request for a while, you should consider rebasing on main and resolving any conflicts. IMPORTANT : Never ever merge upstream main into your branches. You should always git rebase on main to bring your changes up to date when necessary. sh git checkout main git pull upstream main git checkout <your-topic-branch> git rebase main Thank you for your contributions!","title":"Contributing"},{"location":"CONTRIBUTING/#contributing-to-appfile","text":"Please take a moment to review this document in order to make the contribution process easy and effective for everyone involved!","title":"Contributing to Appfile"},{"location":"CONTRIBUTING/#using-the-issue-tracker","text":"You can use the issues tracker for: Contributing to Appfile Using the issue tracker Bug reports Feature requests Pull requests Use Stackoverflow for questions and personal support requests.","title":"Using the issue tracker"},{"location":"CONTRIBUTING/#bug-reports","text":"A bug is a demonstrable problem that is caused by the code in the repository. Good bug reports are extremely helpful - thank you! Guidelines for bug reports: Use the GitHub issue search \u2014 check if the issue has already been reported. Check if the issue has been fixed \u2014 try to reproduce it using the main branch in the repository. Isolate and report the problem \u2014 ideally create a reduced test case. Please try to be as detailed as possible in your report. Include information about your Appfile binary. Please provide steps to reproduce the issue as well as the outcome you were expecting! All these details will help developers to fix any potential bugs. Example: Short and descriptive example bug report title A summary of the issue and the environment in which it occurs. If suitable, include the steps required to reproduce the bug. This is the first step This is the second step Further steps, etc. Any other information you want to share that is relevant to the issue being reported. This might include the lines of code that you have identified as causing the bug, and potential solutions (and your opinions on their merits).","title":"Bug reports"},{"location":"CONTRIBUTING/#feature-requests","text":"Feature requests are welcome. But take a moment to find out whether your idea fits with the scope and aims of the project. It\u2019s up to you to make a strong case to convince the community of the merits of this feature. Please provide as much detail and context as possible.","title":"Feature requests"},{"location":"CONTRIBUTING/#pull-requests","text":"Good pull requests - patches, improvements, new features - are a fantastic help. They should remain focused in scope and avoid containing unrelated commits. IMPORTANT : By submitting a patch, you agree that your work will be licensed under the license used by the project. If you have any large pull request in mind (e.g. implementing features, refactoring code, etc), please ask first otherwise you risk spending a lot of time working on something that the project\u2019s developers might not want to merge into the project. Please adhere to the coding conventions in the project (indentation, accurate comments, etc.) and don\u2019t forget to add your own tests and documentation. When working with git, we recommend the following process in order to craft an excellent pull request: Fork the project, clone your fork, and configure the remotes: sh # Clone your fork of the repo into the current directory git clone https://github.com/<your-username>/appfile # Navigate to the newly cloned directory cd appfile # Assign the original repo to a remote called \"upstream\" git remote add upstream https://github.com/renehernandez/appfile If you cloned a while ago, get the latest changes from upstream: bash git checkout main git pull upstream main Create a new topic branch (off of main ) to contain your feature, change, or fix. IMPORTANT : Making changes in main is discouraged. You should always keep your local main in sync with upstream main and make your changes in topic branches. sh git checkout -b <topic-branch-name> Commit your changes in logical chunks. Keep your commit messages organized, with a short description in the first line and more detailed information on the following lines. Feel free to use Git\u2019s interactive rebase feature to tidy up your commits before making them public. Make sure all the tests are still passing. sh rake Push your topic branch up to your fork: sh git push origin <topic-branch-name> Open a Pull Request with a clear title and description. If you haven\u2019t updated your pull request for a while, you should consider rebasing on main and resolving any conflicts. IMPORTANT : Never ever merge upstream main into your branches. You should always git rebase on main to bring your changes up to date when necessary. sh git checkout main git pull upstream main git checkout <your-topic-branch> git rebase main Thank you for your contributions!","title":"Pull requests"},{"location":"LICENSE/","text":"MIT License Copyright (c) 2020 Rene Hernandez Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \u201cSoftware\u201d), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \u201cAS IS\u201d, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"License"},{"location":"cli_reference/","text":"CLI Reference \u00b6 This is a reference for the appfile CLI, which enables you to manage deployments to DigitalOcean App Platform. Command List \u00b6 The following is a complete list of the commands provided by appfile . Command Description destroy Destroy apps running in DigitalOcean diff Diff local app spec against app spec running in DigitalOcean lint Lint the apps definitions against the App Specification Reference status Show status for apps defined in the appfile sync Sync all resources from app platform specs to DigitalOcean appfile \u00b6 Deploy app platform specifications to DigitalOcean Options \u00b6 -t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") -h, --help help for appfile --log-level string Set log level (default \"info\") appfile destroy \u00b6 Destroy apps running in DigitalOcean Synopsis \u00b6 Destroy apps running in DigitalOcean It fails without deleting any app if any of the apps declared in the appfile spec is not found in DigitalOcean appfile destroy [flags] Examples \u00b6 # Destroy using defaults: appfile.yaml in current location, default environment and DIGITALOCEAN_ACCESS_TOKEN env var appfile destroy # Destroy using appfile.yaml in custom location, review environment and access token option appfile destroy --file /path/to/appfile.yaml --environment review --access-token $TOKEN # Destroy with debug output appfile destroy --log-level debug Options \u00b6 -h, --help help for destroy Options inherited from parent commands \u00b6 -t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") --log-level string Set log level (default \"info\") appfile diff \u00b6 Diff local app spec against app spec running in DigitalOcean Synopsis \u00b6 Diff local app spec against app spec running in DigitalOcean appfile diff [flags] Examples \u00b6 # Diff using defaults: appfile.yaml in current location, default environment and DIGITALOCEAN_ACCESS_TOKEN env var appfile diff # Diff using appfile.yaml in custom location, review environment and access token option appfile diff --file /path/to/appfile.yaml --environment review --access-token $TOKEN # Diff with debug output appfile sync --log-level debug Options \u00b6 -h, --help help for diff Options inherited from parent commands \u00b6 -t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") --log-level string Set log level (default \"info\") appfile help \u00b6 Help about any command Synopsis \u00b6 Help provides help for any command in the application. Simply type appfile help [path to command] for full details. appfile help [command] [flags] Options \u00b6 -h, --help help for help Options inherited from parent commands \u00b6 -t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") --log-level string Set log level (default \"info\") appfile lint \u00b6 Lint the apps definitions against the App Specification Reference Synopsis \u00b6 Lint the apps specifications against the App Specification Reference. For more details, check the Reference at https://www.digitalocean.com/docs/app-platform/references/app-specification-reference/ appfile lint [flags] Examples \u00b6 # Lint using defaults: appfile.yaml in current location, default environment and DIGITALOCEAN_ACCESS_TOKEN env var appfile lint # Lint using appfile.yaml in custom location, review environment and access token option appfile lint --file /path/to/appfile.yaml --environment review --access-token $TOKEN # Lint with debug output appfile lint --log-level debug Options \u00b6 -h, --help help for lint Options inherited from parent commands \u00b6 -t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") --log-level string Set log level (default \"info\") appfile status \u00b6 Show status for apps defined in the appfile Synopsis \u00b6 Show status for apps defined in the appfile. appfile status [flags] Examples \u00b6 # Status using defaults: appfile.yaml in current location, default environment and DIGITALOCEAN_ACCESS_TOKEN env var appfile status # Status using appfile.yaml in custom location, review environment and access token option appfile status --file /path/to/appfile.yaml --environment review --access-token $TOKEN # Status with debug output appfile status --log-level debug Options \u00b6 -h, --help help for status Options inherited from parent commands \u00b6 -t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") --log-level string Set log level (default \"info\") appfile sync \u00b6 Sync all resources from app platform specs to DigitalOcean Synopsis \u00b6 Sync all resources from app platform specs to DigitalOcean If there is no app with the existing name, a new app will be create. Otherwise the existing app will be updated with the changes in the spec. appfile sync [flags] Examples \u00b6 # Sync using defaults: appfile.yaml in current location, default environment and DIGITALOCEAN_ACCESS_TOKEN env var appfile sync # Sync using appfile.yaml in custom location, review environment and access token option appfile sync --file /path/to/appfile.yaml --environment review --access-token $TOKEN # Sync with debug output appfile sync --log-level debug Options \u00b6 -h, --help help for sync Options inherited from parent commands \u00b6 -t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") --log-level string Set log level (default \"info\")","title":"CLI Reference"},{"location":"cli_reference/#cli-reference","text":"This is a reference for the appfile CLI, which enables you to manage deployments to DigitalOcean App Platform.","title":"CLI Reference"},{"location":"cli_reference/#command-list","text":"The following is a complete list of the commands provided by appfile . Command Description destroy Destroy apps running in DigitalOcean diff Diff local app spec against app spec running in DigitalOcean lint Lint the apps definitions against the App Specification Reference status Show status for apps defined in the appfile sync Sync all resources from app platform specs to DigitalOcean","title":"Command List"},{"location":"cli_reference/#appfile","text":"Deploy app platform specifications to DigitalOcean","title":"appfile"},{"location":"cli_reference/#options","text":"-t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") -h, --help help for appfile --log-level string Set log level (default \"info\")","title":"Options"},{"location":"cli_reference/#appfile-destroy","text":"Destroy apps running in DigitalOcean","title":"appfile destroy"},{"location":"cli_reference/#synopsis","text":"Destroy apps running in DigitalOcean It fails without deleting any app if any of the apps declared in the appfile spec is not found in DigitalOcean appfile destroy [flags]","title":"Synopsis"},{"location":"cli_reference/#examples","text":"# Destroy using defaults: appfile.yaml in current location, default environment and DIGITALOCEAN_ACCESS_TOKEN env var appfile destroy # Destroy using appfile.yaml in custom location, review environment and access token option appfile destroy --file /path/to/appfile.yaml --environment review --access-token $TOKEN # Destroy with debug output appfile destroy --log-level debug","title":"Examples"},{"location":"cli_reference/#options_1","text":"-h, --help help for destroy","title":"Options"},{"location":"cli_reference/#options-inherited-from-parent-commands","text":"-t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") --log-level string Set log level (default \"info\")","title":"Options inherited from parent commands"},{"location":"cli_reference/#appfile-diff","text":"Diff local app spec against app spec running in DigitalOcean","title":"appfile diff"},{"location":"cli_reference/#synopsis_1","text":"Diff local app spec against app spec running in DigitalOcean appfile diff [flags]","title":"Synopsis"},{"location":"cli_reference/#examples_1","text":"# Diff using defaults: appfile.yaml in current location, default environment and DIGITALOCEAN_ACCESS_TOKEN env var appfile diff # Diff using appfile.yaml in custom location, review environment and access token option appfile diff --file /path/to/appfile.yaml --environment review --access-token $TOKEN # Diff with debug output appfile sync --log-level debug","title":"Examples"},{"location":"cli_reference/#options_2","text":"-h, --help help for diff","title":"Options"},{"location":"cli_reference/#options-inherited-from-parent-commands_1","text":"-t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") --log-level string Set log level (default \"info\")","title":"Options inherited from parent commands"},{"location":"cli_reference/#appfile-help","text":"Help about any command","title":"appfile help"},{"location":"cli_reference/#synopsis_2","text":"Help provides help for any command in the application. Simply type appfile help [path to command] for full details. appfile help [command] [flags]","title":"Synopsis"},{"location":"cli_reference/#options_3","text":"-h, --help help for help","title":"Options"},{"location":"cli_reference/#options-inherited-from-parent-commands_2","text":"-t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") --log-level string Set log level (default \"info\")","title":"Options inherited from parent commands"},{"location":"cli_reference/#appfile-lint","text":"Lint the apps definitions against the App Specification Reference","title":"appfile lint"},{"location":"cli_reference/#synopsis_3","text":"Lint the apps specifications against the App Specification Reference. For more details, check the Reference at https://www.digitalocean.com/docs/app-platform/references/app-specification-reference/ appfile lint [flags]","title":"Synopsis"},{"location":"cli_reference/#examples_2","text":"# Lint using defaults: appfile.yaml in current location, default environment and DIGITALOCEAN_ACCESS_TOKEN env var appfile lint # Lint using appfile.yaml in custom location, review environment and access token option appfile lint --file /path/to/appfile.yaml --environment review --access-token $TOKEN # Lint with debug output appfile lint --log-level debug","title":"Examples"},{"location":"cli_reference/#options_4","text":"-h, --help help for lint","title":"Options"},{"location":"cli_reference/#options-inherited-from-parent-commands_3","text":"-t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") --log-level string Set log level (default \"info\")","title":"Options inherited from parent commands"},{"location":"cli_reference/#appfile-status","text":"Show status for apps defined in the appfile","title":"appfile status"},{"location":"cli_reference/#synopsis_4","text":"Show status for apps defined in the appfile. appfile status [flags]","title":"Synopsis"},{"location":"cli_reference/#examples_3","text":"# Status using defaults: appfile.yaml in current location, default environment and DIGITALOCEAN_ACCESS_TOKEN env var appfile status # Status using appfile.yaml in custom location, review environment and access token option appfile status --file /path/to/appfile.yaml --environment review --access-token $TOKEN # Status with debug output appfile status --log-level debug","title":"Examples"},{"location":"cli_reference/#options_5","text":"-h, --help help for status","title":"Options"},{"location":"cli_reference/#options-inherited-from-parent-commands_4","text":"-t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") --log-level string Set log level (default \"info\")","title":"Options inherited from parent commands"},{"location":"cli_reference/#appfile-sync","text":"Sync all resources from app platform specs to DigitalOcean","title":"appfile sync"},{"location":"cli_reference/#synopsis_5","text":"Sync all resources from app platform specs to DigitalOcean If there is no app with the existing name, a new app will be create. Otherwise the existing app will be updated with the changes in the spec. appfile sync [flags]","title":"Synopsis"},{"location":"cli_reference/#examples_4","text":"# Sync using defaults: appfile.yaml in current location, default environment and DIGITALOCEAN_ACCESS_TOKEN env var appfile sync # Sync using appfile.yaml in custom location, review environment and access token option appfile sync --file /path/to/appfile.yaml --environment review --access-token $TOKEN # Sync with debug output appfile sync --log-level debug","title":"Examples"},{"location":"cli_reference/#options_6","text":"-h, --help help for sync","title":"Options"},{"location":"cli_reference/#options-inherited-from-parent-commands_5","text":"-t, --access-token string API V2 access token -e, --environment string root all resources from spec file (default \"default\") -f, --file string load appfile spec from file (default \"appfile.yaml\") --log-level string Set log level (default \"info\")","title":"Options inherited from parent commands"},{"location":"examples/","text":"Examples \u00b6 Reading an app.yaml specification directly \u00b6 appfile supports reading a plain app.yaml file. The following app.yaml declares a static_site: # app.yaml name: sample-html static_sites: - environment_slug: html github: branch: main deploy_on_push: true repo: renehernandez/sample-html name: sample-html It can be deployed using appfile as follows: appfile sync --file /path/to/app.yaml --access-token <token> This would be equivalent to declare an appfile.yaml as follows: # appfile.yaml specs: - ./app.yaml # app.yaml name: sample-html static_sites: - environment_slug: html github: branch: main deploy_on_push: true repo: renehernandez/sample-html name: sample-html And then, sync your App specification to DigitalOcean App Platform by running: Using access token flag: appfile sync --file /path/to/appfile.yaml --access-token <token> Using DIGITALOCEAN_ACCESS_TOKEN environment variable appfile sync --file /path/to/appfile.yaml For the example above, you don\u2019t need appfile , you can use instead the doctl cli to deploy your app. Let\u2019s look at a more interesting example next with a fictitious Rails app, which will show the flexibility of environments. Deploying a Rails application \u00b6 Check the code here The app spec declares a rails service, a migration job and a database. The 2 environments: review and production will customize the final App spec that gets synced with DigitalOcean. Let\u2019s look at the appfile.yaml , app.yaml and environments definitions below. # appfile.yaml environments: review: - ./envs/review.yaml production: - ./envs/production.yaml specs: - ./app.yaml name: {{ .Values.name }} services: - name: rails-app image: registry_type: DOCR repository: <repo_name> tag: {{ requiredEnv \"IMAGE_TAG\" }} instance_size_slug: {{ .Values.rails.instance_slug }} instance_count: {{ .Values.rails.instance_count }} envs: {{- range $key, $value := .Values.rails.envs }} - key: {{ $key }} value: {{ $value }} {{- end }} {{- if eq .Environment.Name \"review\" }} - name: postgres image: registry_type: DOCR repository: postgres tag: '12.4' internal_ports: - 5432 envs: {{- range $key, $value := .Values.postgres.envs }} - key: {{ $key }} value: {{ $value }} {{- end }} {{- end }} jobs: - name: migrations image: registry_type: DOCR repository: <repo_name> tag: {{ requiredEnv \"IMAGE_TAG\" }}**** envs: {{- range $key, $value := .Values.migrations.envs }} - key: {{ $key }} value: {{ $value }} {{- end }} {{- if eq .Environment.Name \"production\" }} databases: - name: db production: true cluster_name: mydatabase engine: PG version: \"12\" {{- end }} # review.yaml name: sample-{{ requiredEnv \"REVIEW_HOSTNAME\" }} .common_envs: &common_envs DB_USERNAME: postgres DB_PASSWORD: password RAILS_ENV: production rails: instance_slug: basic-xxs instance_count: 1 envs: <<: *common_envs postgres: envs: POSTGRES_USER: postgres POSTGRES_DB: mydatabase POSTGRES_PASSWORD: password migrations: envs: <<: *common_envs # production.yaml name: sample-production .common_envs: &common_envs DB_USERNAME: postgres DB_PASSWORD: strong_password RAILS_ENV: production rails: instance_slug: professional-xs instance_count: 3 envs: <<: *common_envs migrations: envs: <<: *common_envs You can deploy your App in review by running: IMAGE_TAG='fad7869fdaldabh23' REVIEW_HOSTNAME='fix-bug' appfile sync --file /path/to/appfile.yaml --environment review This would deploy a public rails service, and internal postgres service (the database running on a container) and would run the migration job. The final App spec to be synced to DigitalOcean would be: name: sample-fix-bug services: - name: rails-app image: registry_type: DOCR repository: <app-repo> tag: fad7869fdaldabh23 instance_size_slug: basic-xxs instance_count: 1 routes: - path: / envs: - key: DB_PASSWORD value: password - key: DB_USERNAME value: postgres - key: RAILS_ENV value: production - name: postgres image: registry_type: DOCR repository: postgres tag: '12.4' internal_ports: - 5432 envs: - key: POSTGRES_DB value: mydatabase - key: POSTGRES_PASSWORD value: password - key: POSTGRES_USER value: postgres jobs: - name: migrations image: registry_type: DOCR repository: <migration-repo> tag: fad7869fdaldabh23 envs: - key: DB_PASSWORD value: password - key: DB_USERNAME value: postgres - key: RAILS_ENV value: production Or you can deploy your App in production instead: IMAGE_TAG='fad7869fdaldabh23' appfile sync --file /path/to/appfile.yaml --environment production This would deploy a public rails service and a migration job. Both components would connect to an existing database. The final App spec to be synced to DigitalOcean would be: name: sample-production services: - name: rails-app image: registry_type: DOCR repository: <app-repo> tag: fad7869fdaldabh23 instance_size_slug: professional-xs instance_count: 3 routes: - path: / envs: - key: DB_PASSWORD value: strong_password - key: DB_USERNAME value: postgres - key: RAILS_ENV value: production jobs: - name: migrations image: registry_type: DOCR repository: <migration-repo> tag: fad7869fdaldabh23 envs: - key: DB_PASSWORD value: strong_password - key: DB_USERNAME value: postgres - key: RAILS_ENV value: production databases: - name: db production: true cluster_name: mydb engine: PG version: \"12\"","title":"Examples"},{"location":"examples/#examples","text":"","title":"Examples"},{"location":"examples/#reading-an-appyaml-specification-directly","text":"appfile supports reading a plain app.yaml file. The following app.yaml declares a static_site: # app.yaml name: sample-html static_sites: - environment_slug: html github: branch: main deploy_on_push: true repo: renehernandez/sample-html name: sample-html It can be deployed using appfile as follows: appfile sync --file /path/to/app.yaml --access-token <token> This would be equivalent to declare an appfile.yaml as follows: # appfile.yaml specs: - ./app.yaml # app.yaml name: sample-html static_sites: - environment_slug: html github: branch: main deploy_on_push: true repo: renehernandez/sample-html name: sample-html And then, sync your App specification to DigitalOcean App Platform by running: Using access token flag: appfile sync --file /path/to/appfile.yaml --access-token <token> Using DIGITALOCEAN_ACCESS_TOKEN environment variable appfile sync --file /path/to/appfile.yaml For the example above, you don\u2019t need appfile , you can use instead the doctl cli to deploy your app. Let\u2019s look at a more interesting example next with a fictitious Rails app, which will show the flexibility of environments.","title":"Reading an app.yaml specification directly"},{"location":"examples/#deploying-a-rails-application","text":"Check the code here The app spec declares a rails service, a migration job and a database. The 2 environments: review and production will customize the final App spec that gets synced with DigitalOcean. Let\u2019s look at the appfile.yaml , app.yaml and environments definitions below. # appfile.yaml environments: review: - ./envs/review.yaml production: - ./envs/production.yaml specs: - ./app.yaml name: {{ .Values.name }} services: - name: rails-app image: registry_type: DOCR repository: <repo_name> tag: {{ requiredEnv \"IMAGE_TAG\" }} instance_size_slug: {{ .Values.rails.instance_slug }} instance_count: {{ .Values.rails.instance_count }} envs: {{- range $key, $value := .Values.rails.envs }} - key: {{ $key }} value: {{ $value }} {{- end }} {{- if eq .Environment.Name \"review\" }} - name: postgres image: registry_type: DOCR repository: postgres tag: '12.4' internal_ports: - 5432 envs: {{- range $key, $value := .Values.postgres.envs }} - key: {{ $key }} value: {{ $value }} {{- end }} {{- end }} jobs: - name: migrations image: registry_type: DOCR repository: <repo_name> tag: {{ requiredEnv \"IMAGE_TAG\" }}**** envs: {{- range $key, $value := .Values.migrations.envs }} - key: {{ $key }} value: {{ $value }} {{- end }} {{- if eq .Environment.Name \"production\" }} databases: - name: db production: true cluster_name: mydatabase engine: PG version: \"12\" {{- end }} # review.yaml name: sample-{{ requiredEnv \"REVIEW_HOSTNAME\" }} .common_envs: &common_envs DB_USERNAME: postgres DB_PASSWORD: password RAILS_ENV: production rails: instance_slug: basic-xxs instance_count: 1 envs: <<: *common_envs postgres: envs: POSTGRES_USER: postgres POSTGRES_DB: mydatabase POSTGRES_PASSWORD: password migrations: envs: <<: *common_envs # production.yaml name: sample-production .common_envs: &common_envs DB_USERNAME: postgres DB_PASSWORD: strong_password RAILS_ENV: production rails: instance_slug: professional-xs instance_count: 3 envs: <<: *common_envs migrations: envs: <<: *common_envs You can deploy your App in review by running: IMAGE_TAG='fad7869fdaldabh23' REVIEW_HOSTNAME='fix-bug' appfile sync --file /path/to/appfile.yaml --environment review This would deploy a public rails service, and internal postgres service (the database running on a container) and would run the migration job. The final App spec to be synced to DigitalOcean would be: name: sample-fix-bug services: - name: rails-app image: registry_type: DOCR repository: <app-repo> tag: fad7869fdaldabh23 instance_size_slug: basic-xxs instance_count: 1 routes: - path: / envs: - key: DB_PASSWORD value: password - key: DB_USERNAME value: postgres - key: RAILS_ENV value: production - name: postgres image: registry_type: DOCR repository: postgres tag: '12.4' internal_ports: - 5432 envs: - key: POSTGRES_DB value: mydatabase - key: POSTGRES_PASSWORD value: password - key: POSTGRES_USER value: postgres jobs: - name: migrations image: registry_type: DOCR repository: <migration-repo> tag: fad7869fdaldabh23 envs: - key: DB_PASSWORD value: password - key: DB_USERNAME value: postgres - key: RAILS_ENV value: production Or you can deploy your App in production instead: IMAGE_TAG='fad7869fdaldabh23' appfile sync --file /path/to/appfile.yaml --environment production This would deploy a public rails service and a migration job. Both components would connect to an existing database. The final App spec to be synced to DigitalOcean would be: name: sample-production services: - name: rails-app image: registry_type: DOCR repository: <app-repo> tag: fad7869fdaldabh23 instance_size_slug: professional-xs instance_count: 3 routes: - path: / envs: - key: DB_PASSWORD value: strong_password - key: DB_USERNAME value: postgres - key: RAILS_ENV value: production jobs: - name: migrations image: registry_type: DOCR repository: <migration-repo> tag: fad7869fdaldabh23 envs: - key: DB_PASSWORD value: strong_password - key: DB_USERNAME value: postgres - key: RAILS_ENV value: production databases: - name: db production: true cluster_name: mydb engine: PG version: \"12\"","title":"Deploying a Rails application"},{"location":"installation/","text":"Installation \u00b6 appfile can be installed in several ways. Homebrew \u00b6 You can install directly with using the renehernandez/taps as follows: $ brew install renehernandez/taps/appfile Download releases \u00b6 You can always download the released binaries directly from the Github Releases page, which includes binaries for Windows, Mac, Linux and ARM. For the latest releases check here Github Action \u00b6 You can leverage appfile with your Github Actions workflows, by using action-appfile : Marketplace: https://github.com/marketplace/actions/github-action-for-appfile-cli Repository URL: https://github.com/renehernandez/action-appfile","title":"Installation"},{"location":"installation/#installation","text":"appfile can be installed in several ways.","title":"Installation"},{"location":"installation/#homebrew","text":"You can install directly with using the renehernandez/taps as follows: $ brew install renehernandez/taps/appfile","title":"Homebrew"},{"location":"installation/#download-releases","text":"You can always download the released binaries directly from the Github Releases page, which includes binaries for Windows, Mac, Linux and ARM. For the latest releases check here","title":"Download releases"},{"location":"installation/#github-action","text":"You can leverage appfile with your Github Actions workflows, by using action-appfile : Marketplace: https://github.com/marketplace/actions/github-action-for-appfile-cli Repository URL: https://github.com/renehernandez/action-appfile","title":"Github Action"},{"location":"writing_appfile/","text":"Writing appfile \u00b6 Defaults \u00b6 The default name for an appfile is appfile.yaml The default environment is default The access token to DigitalOcean can be specified through the access-token option or the DIGITALOCEAN_ACCESS_TOKEN environment variable Templating \u00b6 Appfile uses go templates for templating your appfile.yaml . While golang ships several built-in functions, we have added all of the functions in the sprig library . We also added the following functions: requiredEnv : allows you to declare a particular environment variable as required for template rendering. If the value is not set, the template rendering step will fail with an error message. toYaml : allows you to get a values block and output the corresponding yaml representation Environment Variables \u00b6 Environments variables can be used anywhere for templating the appfile. Note \u00b6 If you wish to treat your environment variables as strings always, even if they are boolean or numeric values you can use {{ env \"ENV_NAME\" | quote }} or \"{{ env \"ENV_NAME\" }}\" . These approaches also work with the requiredEnv function. Paths Overview \u00b6 Using spec files in conjunction with CLI arguments can be a bit confusing. A few rules to clear up this ambiguity: Absolute paths are always resolved as absolute paths Relative paths referenced in the appfile spec itself are relative to that spec. Relative paths referenced on the command line are relative to the current working directory the user is in","title":"Writing appfile"},{"location":"writing_appfile/#writing-appfile","text":"","title":"Writing appfile"},{"location":"writing_appfile/#defaults","text":"The default name for an appfile is appfile.yaml The default environment is default The access token to DigitalOcean can be specified through the access-token option or the DIGITALOCEAN_ACCESS_TOKEN environment variable","title":"Defaults"},{"location":"writing_appfile/#templating","text":"Appfile uses go templates for templating your appfile.yaml . While golang ships several built-in functions, we have added all of the functions in the sprig library . We also added the following functions: requiredEnv : allows you to declare a particular environment variable as required for template rendering. If the value is not set, the template rendering step will fail with an error message. toYaml : allows you to get a values block and output the corresponding yaml representation","title":"Templating"},{"location":"writing_appfile/#environment-variables","text":"Environments variables can be used anywhere for templating the appfile.","title":"Environment Variables"},{"location":"writing_appfile/#note","text":"If you wish to treat your environment variables as strings always, even if they are boolean or numeric values you can use {{ env \"ENV_NAME\" | quote }} or \"{{ env \"ENV_NAME\" }}\" . These approaches also work with the requiredEnv function.","title":"Note"},{"location":"writing_appfile/#paths-overview","text":"Using spec files in conjunction with CLI arguments can be a bit confusing. A few rules to clear up this ambiguity: Absolute paths are always resolved as absolute paths Relative paths referenced in the appfile spec itself are relative to that spec. Relative paths referenced on the command line are relative to the current working directory the user is in","title":"Paths Overview"}]}